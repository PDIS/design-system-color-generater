/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function t(t){return t<0?-1:0===t?0:1}function n(t,n,e){return(1-e)*t+e*n}function e(t){return(t%=360)<0&&(t+=360),t}const r=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],o=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],a=[95.047,100,108.883];function s(t){return t>>16&255}function i(t){return t>>8&255}function h(t){return 255&t}function c(t,n,e){const r=o,a=r[0][0]*t+r[0][1]*n+r[0][2]*e,s=r[1][0]*t+r[1][1]*n+r[1][2]*e,i=r[2][0]*t+r[2][1]*n+r[2][2]*e;return(255<<24|(255&m(a))<<16|(255&m(s))<<8|255&m(i))>>>0}function u(t){const n=(t+16)/116,e=24389/27,r=n*n*n>216/24389;return c((r?n*n*n:t/e)*a[0],(t>8?n*n*n:t/e)*a[1],(r?n*n*n:t/e)*a[2])}function l(t){const n=function(t){return[(n=[M(s(t)),M(i(t)),M(h(t))])[0]*(e=r)[0][0]+n[1]*e[0][1]+n[2]*e[0][2],n[0]*e[1][0]+n[1]*e[1][1]+n[2]*e[1][2],n[0]*e[2][0]+n[1]*e[2][1]+n[2]*e[2][2]];var n,e}(t)[1]/100;return n<=216/24389?24389/27*n:116*Math.pow(n,1/3)-16}function f(t){return t>8?100*Math.pow((t+16)/116,3):t/(24389/27)*100}function M(t){const n=t/255;return n<=.040449936?n/12.92*100:100*Math.pow((n+.055)/1.055,2.4)}function m(t){const n=t/100;let e=0;return e=n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,0,255,(r=Math.round(255*e))<0?0:r>255?255:r;var r}class w{constructor(t,n,e,r,o,a,s,i,h,c){this.n=t,this.aw=n,this.nbb=e,this.ncb=r,this.c=o,this.nc=a,this.rgbD=s,this.fl=i,this.fLRoot=h,this.z=c}static make(t=function(){return a}(),e=200/Math.PI*f(50)/100,r=50,o=2,s=!1){const i=t,h=.401288*i[0]+.650173*i[1]+-.051461*i[2],c=-.250268*i[0]+1.204414*i[1]+.045854*i[2],u=-.002079*i[0]+.048952*i[1]+.953127*i[2],l=.8+o/10,M=l>=.9?n(.59,.69,10*(l-.9)):n(.525,.59,10*(l-.8));let m=s?1:l*(1-1/3.6*Math.exp((-e-42)/92));m=m>1?1:m<0?0:m;const I=l,b=[m*(100/h)+1-m,m*(100/c)+1-m,m*(100/u)+1-m],d=1/(5*e+1),p=d*d*d*d,g=1-p,C=p*e+.1*g*g*Math.cbrt(5*e),T=f(r)/t[1],E=1.48+Math.sqrt(T),O=.725/Math.pow(T,.2),A=O,H=[Math.pow(C*b[0]*h/100,.42),Math.pow(C*b[1]*c/100,.42),Math.pow(C*b[2]*u/100,.42)],R=[400*H[0]/(H[0]+27.13),400*H[1]/(H[1]+27.13),400*H[2]/(H[2]+27.13)];return new w(T,(2*R[0]+R[1]+.05*R[2])*O,O,A,M,I,b,C,Math.pow(C,.25),E)}}w.DEFAULT=w.make();class I{constructor(t,n,e,r,o,a,s,i,h){this.hue=t,this.chroma=n,this.j=e,this.q=r,this.m=o,this.s=a,this.jstar=s,this.astar=i,this.bstar=h}distance(t){const n=this.jstar-t.jstar,e=this.astar-t.astar,r=this.bstar-t.bstar,o=Math.sqrt(n*n+e*e+r*r);return 1.41*Math.pow(o,.63)}static fromInt(t){return I.fromIntInViewingConditions(t,w.DEFAULT)}static fromIntInViewingConditions(n,e){const r=(65280&n)>>8,o=255&n,a=M((16711680&n)>>16),s=M(r),i=M(o),h=.41233895*a+.35762064*s+.18051042*i,c=.2126*a+.7152*s+.0722*i,u=.01932141*a+.11916382*s+.95034478*i,l=.401288*h+.650173*c-.051461*u,f=-.250268*h+1.204414*c+.045854*u,m=-.002079*h+.048952*c+.953127*u,w=e.rgbD[0]*l,b=e.rgbD[1]*f,d=e.rgbD[2]*m,p=Math.pow(e.fl*Math.abs(w)/100,.42),g=Math.pow(e.fl*Math.abs(b)/100,.42),C=Math.pow(e.fl*Math.abs(d)/100,.42),T=400*t(w)*p/(p+27.13),E=400*t(b)*g/(g+27.13),O=400*t(d)*C/(C+27.13),A=(11*T+-12*E+O)/11,H=(T+E-2*O)/9,R=(20*T+20*E+21*O)/20,P=(40*T+20*E+O)/20,$=180*Math.atan2(H,A)/Math.PI,_=$<0?$+360:$>=360?$-360:$,v=_*Math.PI/180,F=P*e.nbb,D=100*Math.pow(F/e.aw,e.c*e.z),U=4/e.c*Math.sqrt(D/100)*(e.aw+4)*e.fLRoot,q=_<20.14?_+360:_,L=5e4/13*(.25*(Math.cos(q*Math.PI/180+2)+3.8))*e.nc*e.ncb*Math.sqrt(A*A+H*H)/(R+.305),j=Math.pow(L,.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),x=j*Math.sqrt(D/100),B=x*e.fLRoot,G=50*Math.sqrt(j*e.c/(e.aw+4)),S=(1+100*.007)*D/(1+.007*D),V=1/.0228*Math.log(1+.0228*B),W=V*Math.cos(v),k=V*Math.sin(v);return new I(_,x,D,U,B,G,S,W,k)}static fromJch(t,n,e){return I.fromJchInViewingConditions(t,n,e,w.DEFAULT)}static fromJchInViewingConditions(t,n,e,r){const o=4/r.c*Math.sqrt(t/100)*(r.aw+4)*r.fLRoot,a=n*r.fLRoot,s=n/Math.sqrt(t/100),i=50*Math.sqrt(s*r.c/(r.aw+4)),h=e*Math.PI/180,c=(1+100*.007)*t/(1+.007*t),u=1/.0228*Math.log(1+.0228*a),l=u*Math.cos(h),f=u*Math.sin(h);return new I(e,n,t,o,a,i,c,l,f)}static fromUcs(t,n,e){return I.fromUcsInViewingConditions(t,n,e,w.DEFAULT)}static fromUcsInViewingConditions(t,n,e,r){const o=n,a=e,s=Math.sqrt(o*o+a*a),i=(Math.exp(.0228*s)-1)/.0228/r.fLRoot;let h=Math.atan2(a,o)*(180/Math.PI);h<0&&(h+=360);const c=t/(1-.007*(t-100));return I.fromJchInViewingConditions(c,i,h,r)}toInt(){return this.viewed(w.DEFAULT)}viewed(n){const e=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(e/Math.pow(1.64-Math.pow(.29,n.n),.73),1/.9),o=this.hue*Math.PI/180,a=.25*(Math.cos(o+2)+3.8),s=n.aw*Math.pow(this.j/100,1/n.c/n.z),i=a*(5e4/13)*n.nc*n.ncb,h=s/n.nbb,u=Math.sin(o),l=Math.cos(o),f=23*(h+.305)*r/(23*i+11*r*l+108*r*u),M=f*l,m=f*u,w=(460*h+451*M+288*m)/1403,I=(460*h-891*M-261*m)/1403,b=(460*h-220*M-6300*m)/1403,d=Math.max(0,27.13*Math.abs(w)/(400-Math.abs(w))),p=t(w)*(100/n.fl)*Math.pow(d,1/.42),g=Math.max(0,27.13*Math.abs(I)/(400-Math.abs(I))),C=t(I)*(100/n.fl)*Math.pow(g,1/.42),T=Math.max(0,27.13*Math.abs(b)/(400-Math.abs(b))),E=t(b)*(100/n.fl)*Math.pow(T,1/.42),O=p/n.rgbD[0],A=C/n.rgbD[1],H=E/n.rgbD[2];return c(1.86206786*O-1.01125463*A+.14918677*H,.38752654*O+.62144744*A-.00897398*H,-.0158415*O-.03412294*A+1.04996444*H)}}class b{constructor(t,n,e){this.internalHue=t,this.internalChroma=n,this.internalTone=e,this.setInternalState(this.toInt())}static from(t,n,e){return new b(t,n,e)}static fromInt(t){const n=I.fromInt(t),e=l(t);return new b(n.hue,n.chroma,e)}toInt(){return d(this.internalHue,this.internalChroma,this.internalTone)}get hue(){return this.internalHue}set hue(t){this.setInternalState(d(e(t),this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(t){this.setInternalState(d(this.internalHue,t,this.internalTone))}get tone(){return this.internalTone}set tone(t){this.setInternalState(d(this.internalHue,this.internalChroma,t))}setInternalState(t){const n=I.fromInt(t),e=l(t);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=e}}function d(t,n,r){return function(t,n,r,o){if(n<1||Math.round(r)<=0||Math.round(r)>=100)return u(r);t=e(t);let a=n,s=n,i=0,h=!0,c=null;for(;Math.abs(i-a)>=.4;){const n=p(t,s,r);if(h){if(null!=n)return n.viewed(o);h=!1,s=i+(a-i)/2}else null===n?a=s:(c=n,i=s),s=i+(a-i)/2}return null===c?u(r):c.viewed(o)}(e(t),n,(100,(o=r)<0?0:o>100?100:o),w.DEFAULT);var o}function p(t,n,e){let r=0,o=100,a=0,s=1e3,i=1e3,h=null;for(;Math.abs(r-o)>.01;){a=r+(o-r)/2;const c=I.fromJch(a,n,t).toInt(),u=l(c),f=Math.abs(e-u);if(f<.2){const n=I.fromInt(c),e=n.distance(I.fromJch(n.j,n.chroma,t));e<=1&&e<=i&&(s=f,i=e,h=n)}if(0===s&&0===i)break;u<e?r=a:o=a}return h}class g{constructor(t,n){this.hue=t,this.chroma=n,this.cache=new Map}static fromInt(t){const n=b.fromInt(t);return g.fromHueAndChroma(n.hue,n.chroma)}static fromHueAndChroma(t,n){return new g(t,n)}tone(t){let n=this.cache.get(t);return void 0===n&&(n=b.from(this.hue,this.chroma,t).toInt(),this.cache.set(t,n)),n}}class C{constructor(t){const n=b.fromInt(t),e=n.hue;this.a1=g.fromHueAndChroma(e,Math.max(48,n.chroma)),this.a2=g.fromHueAndChroma(e,16),this.a3=g.fromHueAndChroma(e+60,24),this.n1=g.fromHueAndChroma(e,4),this.n2=g.fromHueAndChroma(e,8),this.error=g.fromHueAndChroma(25,84)}static of(t){return new C(t)}}class T{constructor(){}static score(t){let n=0;for(const e of t.values())n+=e;const e=new Map,r=new Map,o=new Array(360).fill(0);for(const[a,s]of t.entries()){const t=s/n;e.set(a,t);const i=I.fromInt(a);r.set(a,i),o[Math.round(i.hue)]+=t}const a=new Map;for(const[t,n]of r.entries()){const e=Math.round(n.hue);let r=0;for(let t=e-15;t<e+15;t++)r+=o[(s=t,(s%=360)<0&&(s+=360),s)];a.set(t,r)}var s;const i=new Map;for(const[t,n]of r.entries()){const e=100*a.get(t)*T.WEIGHT_PROPORTION,r=n.chroma<T.TARGET_CHROMA?T.WEIGHT_CHROMA_BELOW:T.WEIGHT_CHROMA_ABOVE,o=e+(n.chroma-T.TARGET_CHROMA)*r;i.set(t,o)}const h=T.filter(a,r),c=new Map;for(const t of h){let n=!1;const e=r.get(t).hue;for(const[t]of c){if(u=e,l=r.get(t).hue,180-Math.abs(Math.abs(u-l)-180)<15){n=!0;break}}n||c.set(t,i.get(t))}var u,l;const f=Array.from(c.entries());f.sort(((t,n)=>n[1]-t[1]));const M=f.map((t=>t[0]));return 0===M.length&&M.push(4282549748),M}static filter(t,n){const e=new Array;for(const[r,o]of n.entries()){const n=t.get(r);o.chroma>=T.CUTOFF_CHROMA&&l(r)>=T.CUTOFF_TONE&&n>=T.CUTOFF_EXCITED_PROPORTION&&e.push(r)}return e}}T.TARGET_CHROMA=48,T.WEIGHT_PROPORTION=.7,T.WEIGHT_CHROMA_ABOVE=.3,T.WEIGHT_CHROMA_BELOW=.1,T.CUTOFF_CHROMA=15,T.CUTOFF_TONE=10,T.CUTOFF_EXCITED_PROPORTION=.01;const E=t=>{const n=3===(t=t.replace("#","")).length,e=6===t.length,r=8===t.length;if(!n&&!e&&!r)throw new Error("unexpected hex "+t);let o=0,a=0,s=0;return n?(o=O(t.slice(0,1).repeat(2)),a=O(t.slice(1,2).repeat(2)),s=O(t.slice(2,3).repeat(2))):e?(o=O(t.slice(0,2)),a=O(t.slice(2,4)),s=O(t.slice(4,6))):r&&(o=O(t.slice(2,4)),a=O(t.slice(4,6)),s=O(t.slice(6,8))),(255<<24|(255&o)<<16|(255&a)<<8|255&s)>>>0};function O(t){return parseInt(t,16)}function A(){const t=function(t,n,e,r){const o={tonalPalettes:{},light:{},dark:{}},a=C.of(E(t)),c=C.of(E(n)),u=C.of(E("#286B2A")),l=C.of(E(e)),f=C.of(E(r)),M={brand:a.a1,accent:c.a1,positive:u.a1,negative:a.error,information:l.a1,warning:f.a1,netural:a.n1,neutralvariant:a.n2},m=[0,10,20,25,30,35,40,50,60,70,80,90,95,98,99,100];return Object.entries(M).forEach((([t,n])=>{o.tonalPalettes[t]={},m.forEach((e=>{o.tonalPalettes[t]["tone"+e]=(t=>{const n=s(t),e=i(t),r=h(t),o=[n.toString(16),e.toString(16),r.toString(16)];for(const[t,n]of o.entries())1===n.length&&(o[t]="0"+n);return"#"+o.join("")})(n.tone(e))}))})),o}(document.getElementById("brand").value,document.getElementById("accent").value,document.getElementById("information").value,document.getElementById("warning").value);Object.entries(t.tonalPalettes).forEach((([t,n])=>{Object.entries(n).forEach((([n,e])=>{$(`div.${t}.${n}`).css("background-color",e),$(`div.${t}.text-${n}`).css("color",e),$(`span.${t}.${n}`).html(`<i class="bi bi-square-fill"></i>${e}`),$(`span.${t}.${n} i`).css("color",e)}))})),[99,10].forEach((n=>{const e=99==n?t.tonalPalettes.netural.tone99:t.tonalPalettes.netural.tone10,r=99==n?t.tonalPalettes.brand.tone40:t.tonalPalettes.netural.tone80;[5,8,11,12,14].forEach((t=>{const o=function(t,n,e){const r=1-e;t=H(t),n=H(n);return"#"+((Math.floor(e*n.red+r*t.red)<<16)+(Math.floor(e*n.green+r*t.green)<<8)+Math.floor(e*n.blue+r*t.blue)).toString(16)}(e,r,t/100);$(`div.netural.tone${n}.surface${t}`).css("background-color",o),$(`span.netural.tone${n}.surface${t}`).html(`<i class="bi bi-square-fill"></i>${o}`),$(`span.netural.tone${n}.surface${t} i`).css("color",o)}))}))}function H(t){return{red:parseInt(t[1]+t[2],16),green:parseInt(t[3]+t[4],16),blue:parseInt(t[5]+t[6],16)}}window.update_color=function(){A()},A()})();